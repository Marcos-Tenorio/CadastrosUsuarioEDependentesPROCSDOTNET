


<form id="formCadastro" method="post">
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="Nome">Nome:</label>
                <input required="required" type="text" class="form-control" id="Nome" name="Nome" placeholder="Ex.: João" maxlength="50">
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Sobrenome">Sobrenome:</label>
                <input required="required" type="text" class="form-control" id="Sobrenome" name="Sobrenome" placeholder="Ex.: da Silva" maxlength="255">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="CPF">CPF:</label>
                <input required="required" type="text" class="form-control" id="CPF" formmethod="get" name="CPF" placeholder="Ex.: 999.999.999-99" maxlength="14">
            </div>

            <script>
                $(document).ready(function () {
                    $("#CPF").on("input", function () {
                        var cpf = $(this).val();

                        // Verifica se o CPF tem 11 dígitos antes de fazer a chamada
                        if (cpf.length === 11) {
                            $.get("/Cliente/Incluir", { cpf: cpf }, function (data) {
                                if (data.Resultado === "falha") {
                                    $("#myModal").modal("show"); // Exibir o modal em caso de falha
                                } else {
                                    // Continuar com outras ações após a validação bem-sucedida
                                }
                            });
                        }
                    });
                });
            </script>
            <script>

                function mascara_cpf(input) {

                    var value = input.value.replace(/\D/g, '');

                    if (value.length > 3) {
                        value = value.substring(0, 3) + '.' + value.substring(3);
                    }
                    if (value.length > 7) {
                        value = value.substring(0, 7) + '.' + value.substring(7);
                    }
                    if (value.length > 11) {
                        value = value.substring(0, 11) + '-' + value.substring(11, 13);
                    }

                    input.value = value;
                }

                var cpfInput = document.getElementById('CPF');

                cpfInput.addEventListener('input', function () {
                    mascara_cpf(this);
                });

            </script>
        </div>

        <div class="col-md-6">
            <div class="form-group">
                <label for="Nacionalidade">Nacionalidade:</label>
                <input required="required" type="text" class="form-control" id="Nacionalidade" name="Nacionalidade" placeholder="Ex.: brasileira" maxlength="50">
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-md-4">
            <div class="form-group">
                <label for="CEP">CEP:</label>
                <input required="required" type="text" class="form-control" id="CEP" name="CEP" placeholder="Ex.: 01011-100" maxlength="9">
            </div>
            <script>

                function mascara_cep(input) {

                    var value = input.value.replace(/\D/g, '');

                    if (value.length > 5) {
                        value = value.substring(0, 5) + '-' + value.substring(5, 8);
                    }

                    input.value = value;
                }

                var cepInput = document.getElementById('CEP');

                cepInput.addEventListener('input', function () {
                    mascara_cep(this);
                });

            </script>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="Estado">Estado:</label>
                <select required="required" id="Estado" class="form-control" name="Estado">
                    <option value="">Selecione</option>
                    <option value="SP">São Paulo</option>
                    <option value="PE">Pernambuco</option>
                </select>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="Cidade">Cidade:</label>
                <input required="required" type="text" class="form-control" id="Cidade" name="Cidade" maxlength="50" placeholder="Ex.: São Paulo">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="Logradouro">Logradouro:</label>
                <input required="required" type="text" class="form-control" id="Logradouro" name="Logradouro" placeholder="Ex.: Rua Boa Vista 253" maxlength="500">
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="Email">E-mail:</label>
                <input required="required" type="text" class="form-control" id="Email" name="Email" placeholder="Ex.: email@email.com" maxlength="2079">
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="Telefone">Telefone:</label>
                <input required="required" type="tel" class="form-control" id="Telefone" name="Telefone" placeholder="Ex.: (11) 2020-3030" maxlength="12">
            </div>
        </div>
    </div>
   
    <div class="row">
        <div class="container">
            <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#myModal">
                Beneficiarios
            </button>

            <!-- Popup -->
            <div class="modal fade" id="myModal">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Beneficiarios</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row row align-items-center">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="CPF">CPF:</label>
                                        <input required="required" type="text" class="form-control" id="CPF" formmethod="get" name="CPF" placeholder="Ex.: 999.999.999-99" maxlength="14">
                                    </div>
                                    <script>

                                        function mascara_cpf(input) {

                                            var value = input.value.replace(/\D/g, '');

                                            if (value.length > 3) {
                                                value = value.substring(0, 3) + '.' + value.substring(3);
                                            }
                                            if (value.length > 7) {
                                                value = value.substring(0, 7) + '.' + value.substring(7);
                                            }
                                            if (value.length > 11) {
                                                value = value.substring(0, 11) + '-' + value.substring(11, 13);
                                            }

                                            input.value = value;
                                        }

                                        var cpfInput = document.getElementById('CPF');

                                        cpfInput.addEventListener('input', function () {
                                            mascara_cpf(this);
                                        });

                                    </script>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label for="Nome">Nome:</label>
                                        <input required="required" type="text" class="form-control" id="Nome" name="Nome" placeholder="Ex.: João" maxlength="50">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <button type="submit" class="btn btn-sm btn-success">Incluir</button>
                                </div>
                            </div>
                        </div>
                     

                            <!--    <div class="modal-body">
                 <table class="table">
                     <thead>
                         <tr>
                             <th>Coluna 1</th>
                             <th>Coluna 2</th>
                         </tr>
                     </thead>
                     <tbody>
                         COLOCAR O arroba foreach (var item in ListaBenef)
                         {
                             <tr>
                                 <td>ARROBAitem.Nome</td>
                                 <td>ARROBAitem.CPF</td>
                             </tr>
                         }
                     </tbody>
                 </table>
             </div>
             -->
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                            </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="pull-right">
                <button type="submit" class="btn btn-sm btn-success">Salvar</button>
                
            </div>
            <div class="pull-right">
                @Html.ActionLink("Voltar", "Index", "Cliente", new { }, new { @class = "btn btn-sm btn-danger" })
            </div>



        </div>
    </div>


</form>
